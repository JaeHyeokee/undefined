<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" th:href="@{/css/mypage/manager/MemberManagement.css}">
    <title>Title</title>
</head>
<body>

<main>
    <!-- 좌측 네비게이션 메뉴 -->
    <nav class="provider-menu">
        <ul>
            <li class="provider-menu-list">
                <img src="/image/approval.png" alt="" class="provider-menu-icon">
                <a th:href="@{/mypage/manager/ApprovalLodgingUpdate}">승인요청</a>
            </li>
            <li class="provider-menu-list">
                <img src="/image/Member.png" alt="" class="provider-menu-icon">
                <a th:href="@{/mypage/manager/MemberManagement}">회원관리</a>
            </li>
        </ul>
    </nav>


    <section class="content">
        <h2>회원 목록</h2>
        <table>
            <thead>
            <tr>
                <th>user_id</th>
                <th>user_name</th>
                <th>user_email</th>
                <th>user_regdate</th>
                <th>user_nickname</th>
                <th>ROLE_PROVIDER</th>
                <th>ROLE_MASTER</th>
                <th>권한부여</th>
                <th>권한삭제</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="manager : ${managers}">
                <td th:text="${manager.userId}"></td>
                <td th:text="${manager.username}"></td>
                <td th:text="${manager.email}"></td>
                <td th:text="${manager.regDate}"></td>
                <td th:text="${manager.nickname}"></td>
                <td th:text="${manager.hasRoleProvider ? 'ROLE_PROVIDER' : 'null'}"></td>
                <td th:text="${manager.hasRoleMaster ? 'ROLE_MASTER' : 'null'}"></td>
                <td>
                    <form th:if="${!manager.hasRoleProvider}"
                          th:action="@{/mypage/manager/addRoleProvider}"
                          method="post"
                          style="display: inline;"
                          onsubmit="return confirmAction('${manager.username}', '오너 권한을 부여')">
                        <input type="hidden" name="userId" th:value="${manager.userId}" />
                        <input type="hidden" name="username" th:value="${manager.username}" />
                        <button type="submit">Add ROLE_PROVIDER</button>
                    </form>
                    <form th:if="${!manager.hasRoleMaster}"
                          th:action="@{/mypage/manager/addRoleMaster}"
                          method="post"
                          style="display: inline;"
                          onsubmit="return confirmAction('${manager.username}', '마스터 권한을 부여')">
                        <input type="hidden" name="userId" th:value="${manager.userId}" />
                        <input type="hidden" name="username" th:value="${manager.username}" />
                        <button type="submit">Add ROLE_MASTER</button>
                    </form>
                </td>
                <td>
                    <form th:if="${manager.hasRoleProvider}"
                          th:action="@{/mypage/manager/removeRoleProvider}"
                          method="post"
                          style="display: inline;"
                          onsubmit="return confirmAction('${manager.username}', '오너 권한을 제거')">
                        <input type="hidden" name="userId" th:value="${manager.userId}" />
                        <input type="hidden" name="username" th:value="${manager.username}" />
                        <button type="submit">Remove ROLE_PROVIDER</button>
                    </form>
                    <form th:if="${manager.hasRoleMaster}"
                          th:action="@{/mypage/manager/removeRoleMaster}"
                          method="post"
                          style="display: inline;"
                          onsubmit="return confirmAction('${manager.username}', '마스터 권한을 제거')">
                        <input type="hidden" name="userId" th:value="${manager.userId}" />
                        <input type="hidden" name="username" th:value="${manager.username}" />
                        <button type="submit">Remove ROLE_MASTER</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </section>

<!--    <section class="content">-->
<!--        <h2>회원 목록</h2>-->
<!--        <table>-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th>user_id</th>-->
<!--                <th>user_name</th>-->
<!--                <th>user_email</th>-->
<!--                <th>user_regdate</th>-->
<!--                <th>user_nickname</th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr th:each="manager : ${managers}">-->
<!--                <td th:text="${manager.userId}"></td>-->
<!--                <td th:text="${manager.username}"></td>-->
<!--                <td th:text="${manager.email}"></td>-->
<!--                <td th:text="${manager.regDate}"></td>-->
<!--                <td th:text="${manager.nickname}"></td>-->

<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->

<!--        &lt;!&ndash; 권한 정보 출력 &ndash;&gt;-->
<!--        <table>-->
<!--            <tbody>-->
<!--            <tr th:each="userAuthoritie : ${userAuthorities}">-->
<!--                <td th:text="${userAuthoritie.userid}"></td>-->
<!--                <td th:text="${userAuthoritie.authorityId}"></td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->

<!--    </section>-->
</main>
</body>
<script th:src="@{/js/mypage/manager/MemberManagement.js}"></script>
</html>