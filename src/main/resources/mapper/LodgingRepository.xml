<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lec.spring.repository.LodgingRepository">

<!--    <select id="findAllLodgingDetails" resultType="com.lec.spring.domain.Lodging">-->
<!--        SELECT l.lodging_name AS lodgingName,-->
<!--               l.lodging_picture_1 AS lodgingPicture1,-->
<!--               MIN(r.room_price) AS roomPrice-->
<!--        FROM lodging l-->
<!--                 JOIN room r-->
<!--                     ON l.lodging_id = r.lodging_id-->
<!--        GROUP BY l.lodging_name, l.lodging_picture_1;-->
<!--    </select>-->

    <select id="findLodgingsByLocation" resultType="com.lec.spring.domain.Lodging">
        SELECT l.lodging_id AS id,
               l.lodging_name AS lodgingName,
               l.lodging_picture_1 AS lodgingPicture1,
               MIN(r.room_price) AS roomPrice
        FROM lodging l
                 JOIN room r
                      ON l.lodging_id = r.lodging_id
        WHERE l.lodging_location1 = #{location} OR l.lodging_location2 = #{location}
        GROUP BY l.lodging_id, l.lodging_name, l.lodging_picture_1;
    </select>

</mapper>


<!--    <resultMap id="LodgingResultMap" type="com.lec.spring.domain.Lodging">-->
<!--        <id property="lodgingId" column="lodging_id"/>-->
<!--        <result property="lodgingPicture1" column="lodging_picture_1"/>-->
<!--        <result property="lodgingPicture2" column="lodging_picture_2"/>-->
<!--        <result property="lodgingPicture3" column="lodging_picture_3"/>-->
<!--        <result property="lodgingName" column="lodging_name"/>-->
<!--        <result property="lodgingLocation1" column="lodging_location1"/>-->
<!--        <result property="lodgingLocation2" column="lodging_location2"/>-->
<!--        <result property="lodgingAddress" column="lodging_address"/>-->
<!--        <result property="lodgingNumber" column="lodging_number"/>-->
<!--        <result property="lodgingUrl" column="lodging_url"/>-->
<!--        <result property="lodgingOpen" column="lodging_open"/>-->
<!--        <result property="lodgingClose" column="lodging_close"/>-->
<!--        <result property="lodgingIntroduce" column="lodging_introduce"/>-->
<!--        <result property="lodgingService" column="lodging_service"/>-->
<!--        <result property="lodgingUsingInfo" column="lodging_usingInfo"/>-->
<!--        <result property="lodgingNotice" column="lodging_notice"/>-->
<!--        <result property="lodgingOwnerName" column="lodging_owner_name"/>-->
<!--        <result property="lodgingOwnerNumber" column="lodging_owner_number"/>-->
<!--        <result property="lodgingOwnerEmail" column="lodging_owner_email"/>-->
<!--        <result property="lodgingOwnerId" column="lodging_owner_id"/>-->
<!--        <result property="userId" column="user_id"/>-->
<!--    </resultMap>-->
<!--<select id="aaa">-->
<!--    SELECT * FROM lodging-->
<!--    WHERE lodging_location1 = :search_value;-->
<!--</select>-->
