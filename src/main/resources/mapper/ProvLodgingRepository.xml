<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lec.spring.repository.ProviderRepository">

    <sql id="SELECT_BASE">
        SELECT l.lodging_id AS lodgingId
             , l.lodging_picture_1 AS lodgingPicture1
             , l.lodging_picture_2 AS lodgingPicture2
             , l.lodging_picture_3 AS lodgingPicture3
             , l.lodging_name AS lodgingName
             , l.lodging_type AS lodgingType
             , l.lodging_location1 AS lodgingLocation1
             , l.lodging_location2 AS lodgingLocation2
             , l.lodging_address AS lodgingAddress
             , l.lodging_number AS lodgingNumber
             , l.lodging_url AS lodgingUrl
             , l.lodging_open AS lodgingOpen
             , l.lodging_close AS lodgingClose
             , l.lodging_introduce AS lodgingIntroduce
             , l.lodging_service AS lodgingService
             , l.lodging_usinginfo AS lodgingUsingInfo
             , l.lodging_notice AS lodgingNotice
             , l.lodging_owner_name AS lodgingOwnerName
             , l.lodging_owner_number AS lodgingOwnerNumber
             , l.lodging_owner_email AS lodgingOwnerEmail
             , l.lodging_owner_id AS lodgingOwnerId
             , u.user_id AS userId
        FROM
            lodging l, user u
        WHERE
            l.user_id = u.user_id
    </sql>

    <select id="findByUserId" resultType="com.lec.spring.domain.ProvLodging">
        <include refid="SELECT_BASE"/>
        AND l.user_id = #{userId}
    </select>

    <select id="findAllDetails" resultType="com.lec.spring.domain.ProvLodging">
        SELECT
            lodging_id as lodgingId,
            lodging_picture_1 as lodgingPicture1,
            lodging_name as lodgingName,
            lodging_type as lodgingType,
            lodging_address as lodgingAddress,
            lodging_number as lodgingNumber
        FROM lodging
        WHERE lodging_type = '모텔'
    </select>

    <select id="findLodgingById" parameterType="int" resultType="com.lec.spring.domain.ProvLodging">
        SELECT
            lodging_id as lodgingId,
            lodging_picture_1 as lodgingPicture1,
            lodging_picture_2 as lodgingPicture2,
            lodging_picture_3 as lodgingPicture3,
            lodging_name as lodgingName,
            lodging_type as lodgingType,
            lodging_location1 as lodgingLocation1,
            lodging_location2 as lodgingLocation2,
            lodging_address as lodgingAddress,
            lodging_number as lodgingNumber,
            lodging_url as lodgingUrl,
            lodging_open as lodgingOpen,
            lodging_close as lodgingClose,
            lodging_introduce as lodgingIntroduce,
            lodging_service as lodgingService,
            lodging_usinginfo as lodgingUsingInfo,
            lodging_notice as lodgingNotice,
            lodging_owner_name as lodgingOwnerName,
            lodging_owner_number as lodgingOwnerNumber,
            lodging_owner_email as lodgingOwnerEmail,
            lodging_owner_id as lodgingOwnerId
        FROM
            lodging
        WHERE
            lodging_id = #{lodgingId}
    </select>

    <insert id="saveLodging" parameterType="com.lec.spring.domain.ProvLodging">
        INSERT INTO lodging (
            lodging_picture_1, lodging_picture_2, lodging_picture_3, lodging_name,
            lodging_type, lodging_location1, lodging_location2, lodging_address,
            lodging_number, lodging_url, lodging_open, lodging_close,
            lodging_introduce, lodging_service, lodging_usinginfo, lodging_notice,
            lodging_owner_name, lodging_owner_email, lodging_owner_id
        )
        VALUES (
                   #{lodgingPicture1}, #{lodgingPicture2}, #{lodgingPicture3}, #{lodgingName},
                   #{lodgingType}, #{lodgingLocation1}, #{lodgingLocation2}, #{lodgingAddress},
                   #{lodgingNumber}, #{lodgingUrl}, #{lodgingOpen}, #{lodgingClose},
                   #{lodgingIntroduce}, #{lodgingService}, #{lodgingUsingInfo}, #{lodgingNotice},
                   #{lodgingOwnerName}, #{lodgingOwnerNumber}, #{lodgingOwnerEmail}, #{lodgingOwnerId}
               )
    </insert>
</mapper>


